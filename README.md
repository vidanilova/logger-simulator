# Logger simulator
 
## Описание объекта

Логгер передает время измерения time, серийный номер косы kosa (уникальный в течение года),  год ее изготовления kosa_year 
(начиная с 2000 года) и температуру в градусах Цельсия temperature  в массиве. Размер массива 1..28. 
Точность до 4 знака после плавающей запятой.
Также передаются напряжения на шине термометров vcc и напряжение батареи vbat.
Класс LoggerBuilder в методах build()создает один или несколько бинарных пакетов. 
Класс LoggerBuilder и нужные для него другие функции лежат в библиотеке liblogger-huffman.a или logger-huffman.lib для Windows в проекте 
https://github.com/commandus/logger-huffman 
Максимум длина одного бинарного пакета - 24 байта для отправки в сети LoRaWAN.

### Для чего надо
В network server https://github.com/commandus/lorawan-network-server есть утилита dev-payload, которой нужно будет передавать полученные пакеты в опции -x
Остальные опции dev-payload:
 + -i, --identity= identity JSON file
 + -e, --eui= end-device identifier
 + -E, --devicename= end-device name
 + -a, --address=IP:port Send packet to network server. default port 5000
 + -j --json-only Suppress header (JSON only)

нужны для идентификации LoRA устройства в LoRaWAN сети. 
Разрабатываемая программа должна формировать пакеты в виде шестнадцатеричных строк для передачи dev-payload.
Для тестирования можно использовать утилиту logger-huffman-print, прилагаемой к библиотеке, 
которая распечатывает на экран содержимое серии пакетов.
Требования к программе 
Утилита командной строки для эмуляции данных с логгера температуры должна считать значения температуры в виде десятичных чисел с точкой 
(или запятой) (например, 36.6) из файла, устройства ввода или из опций командной строки. Пользователь должен указать серийный номер, 
год выпуска косы в файле или в опциях командной строки. Время должно указываться текущее.
Примерно так:

logger-simulate –type base -time  2012-03-02T04:07:34 –kosa 38 –year 19 -vcc 4.6 –vbat 1.5 2.3456 -3.1234 -5 6.1 
Результат - серия шестнадцатеричных строк в stdout следующего вида (каждый пакет с  новой строки):
4801ab1232432456463573645
4adaf1223234324

Есть три типа пакетов (base, diff, huffman).

Для разбора опций командной строки можно использовать библиотеку argtable3, там два файла всего.

---

### Использованы программы:
1.	Windows 10 
2.	Microsoft Visual Studio 2022 
3.	Git Bash 
4.	CMake 
5.	Visual Studio Code
6.	GitHub 
8.	FAR Manager 


### Как его сделать
### Пункт 1

_Сначала устанавливаем Git Bash для эмуляции работы командной строки с официального сайта https://git-scm.com/downloads.
Подбираем версию, подходящую под параметры вашего ПК. В моем случае установлена ​​64-битная версия._

---

1. После скачивания устанавливаем эмулятор.
2. Далее обязательно поставьте галочку, чтобы значок программы отображался на рабочем столе.
3. Выберите элемент для кода Visual Studio.
4. Щелкните все параметры для установки.
5. Дожидаемся окончания установки. Установка прошла успешно.
6. Открыли командную строку и ввели несколько кодов для активации связи с этим ПК.

Далее переходим на официальный сайт GitHub и создаем свою учетную запись (указываем электронную почту и придумываем любой пароль).
Если регистрация прошла успешно, рядом с данными отобразится зеленая галочка.

---

_Скачать с официального сайта https://cmake.org/download/.
Затем прокрутите немного вниз и снова выберите именно ту версию, которая вам нужна._

Загрузите, затем установите шаг за шагом:
 1. Выберите «Восстановить», нажмите «Далее».
 2. Устанавливаем до конца и отмечаем пустые галочки. В моем случае эта программа уже была предустановлена.
 3. После установки заходим в командную строку через вкладку "Пуск" или жмем "Win+R" и вводим cmd.
 4. Устранение неполадок.
 5. Далее мы ввели несколько команд для привязки учетной записи, которая была зарегистрирована на официальном сайте.
 6.Затем, не закрывая назад,
 заходим в Git Bash и пишем коды и наш адрес, чтобы уведомление об ошибке не показывалось.

---

Установка интегрированной среды разработки Visual Studio. Создание библиотеки проекта.
Почти все готово, осталось только создать трафик.
*Сначала для этого
скачать Visual Studio с официального сайта https://visualstudio.microsoft.com/ или найти любой источник.
*Второй. Далее выберите вариант с C++.
*В третьих. Нажмите «Установить» и подождите, пока файлы распакуются.
*Четвертый. После установки запустите программу и выполните следующие действия:
создайте проект, не закрывайте программу и снова откройте командную строку и введите следующие коды.
* Пятый. Если все работает безупречно,
теперь зайдем в наш Git Bash и дополнительно запишем
больше кодов для ввода после этого вернемся обратно в Virtual Studio и нажмем правой кнопкой мыши на "Build".
* Наконец. Сборка прошла успешно.
*Библиотека собрана.

---

### Пункт 2

Итак, для начала,
скачиваем дополнительную программу с официального сайта https://www.farmanager.com/download.php?l=ru.
Far Manager — это утилита, которая может копировать ваши данные и передавать их на диск Visual Studio.
Далее выберите любой формат файла, подходящий вам по параметрам данного ПК.
После загрузки запустите установочный файл и нажмите «Далее».
После полной установки
запускаем Far Manager и переходим в первое окно и выбираем папку User
(таким образом, мы переходим к внутренним данным нашего компьютера и его пользователя).
Скопируем наш данный проект с помощью команды.

Пишем после указанного проекта "git clone https://github.com/commandus/empty-project.git" в папке src.
Нажмите на «Shift+O» и проверьте, работает ли он без ошибок.
После этого запускаем Visual Studio, и снова нажимаем "Build" на проекте (который скопировали).
Проверим, все ли работает.

---

***Удаление скрытой папки src/empty-project/.git — это действие, которое удаляет ссылку на репозиторий github.
(после первоначальной настройки проекта он будет связан со вторым новым проектом github, а не с пустым шаблоном).***
Для этого заходим в консоль отладки Visual Studio и удаляем первый проект, после удаления он все равно останется.
Откройте его в блокноте. Дополняем.

---

*** Создайте папку сборки и сгенерируйте решение VS: cd src/empty-project; сборка mkdir; сборка компакт-диска; сделай ..***
1. Сначала добавляем в проект включаемые файлы: #include <string>, <vector> и с использованием пространства имен std.
2. Скопируйте путь и вставьте static const std::string programName = "empty-project";
std::string bin2hexString(const std::string& value);
3. Пишем параметры устройства типа: температура, нагрев батареи, дата и т.д.

---

*Зарегистрируйтесь для участия в Live Share.*
1. Заходим в Visual Studio, и регистрируемся на Live Share.
2. После нажатия кнопки у вас будет два пути: первый — войти под учетной записью Windows,
второй — войти в систему с учетной записью GitHub,
в моем случае я пошел по второму методу. Теперь вы можете поделиться своим проектом или работать вместе.
3. Далее мы создаем класс и несколько целых чисел.
4. Исправлено еще несколько настроек.
5. Ставим таймер в проект, сначала правый клик по пустому проекту > Свойства > Отладка > Аргументы команды
и пишем *--time 2012-03-02T04:07:34 12.0 13.1 14.2*
6. Убираем лишнее и приводим проект в порядок.
7. Исправлены внутренние параметры и добавлены дополнительные данные устройства.
8. Переносим файл проекта через Far Manager:
 _git add README. md_
 _git commit -m "first commit"_
 _git push -u origin main_